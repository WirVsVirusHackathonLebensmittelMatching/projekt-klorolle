sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment"],function(e,t){"use strict";var i=false;var o=false;return e.extend("com.wir.vs.virus.timeslots.ShopOwner.controller.Login",{onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this)},onLogin:function(e){var t=this.getView().byId("shopName").getValue();var i=this.getView().getModel("shops").findByName(t);if(i){this.oRouter.navTo("Main",{id:i.id})}else{this.getView().byId("loginFailedMessage").setVisible(true)}},createDialog:function(){return t.load({name:"com/wir/vs/virus/timeslots/ShopOwner/fragments/Registry",id:"registry_fragment",controller:{onRegistryConfirm:function(){var e=sap.ui.getCore().byId("registry_fragment--shopNameInput").getValue();var t=sap.ui.getCore().byId("registry_fragment--shopPostalCodeInput").getValue();var i=Number.parseInt(t);this.getView().getModel("shops").registerShop({name:e,postalCode:i}).then(function(){this.oDialog.close();this.oRouter.navTo("SlotConfig",{id:e})}.bind(this))}.bind(this),onRegistryCancel:function(){this.oDialog.close()}.bind(this),onNameLiveChange:function(e){var t=e.getParameter("value");i=!!t;sap.ui.getCore().byId("registry_fragment--registerConfirm").setEnabled(i&&o)},onPostalCodeLiveChange:function(e){var t=e.getParameter("value");o=t.length===5;sap.ui.getCore().byId("registry_fragment--registerConfirm").setEnabled(i&&o)}}})},onRegister:function(){if(!this.oDialog){this.createDialog().then(function(e){this.oDialog=e;this.getView().addDependent(this.oDialog);this.oDialog.open()}.bind(this))}else{this.byId("shopNameInput").setValue("");this.getControl("registerConfirm").setEnabled(false);this.oDialog.open()}}})});